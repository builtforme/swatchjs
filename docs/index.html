<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>SwatchJS</title>
    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.30/css/uikit.min.css" />

    <!-- jQuery is required -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- UIkit JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.30/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.30/js/uikit-icons.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Courgette" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.1/themes/prism-dark.min.css">
    <style>
        html {
            background: rgba(255, 255, 255, 0)
        }

        body {
            background-color: #EBD6C2;
        }

        .header {
            min-height: 100vh;
            position: relative;
        }

        .lead-font {
            font-family: 'Courgette', cursive;
        }

        .button {
            background-color: #CC6161;
            border-radius: 5px;
        }

        .button:hover {
            background-color: #AF5454;
            /* border-radius: 5px; */
        }

        .button-second {
            /* background-color: #CC6161; */
            border-radius: 5px;
        }

        .button-second:hover {
            background-color: #4D4D4D;
            /* border-radius: 5px; */
        }

        #docs {
            min-height: 100vh;
        }

        hr {
            border-top: 1px solid #505050
        }

        .uk-divider-small::after {
            border-top: 1px solid #505050
        }

        .uk-heading-line>:after,
        .uk-heading-line>:before {
            border-bottom: 1px solid #505050
        }

        .uk-description-list>dt {
            font-size: 1rem;
        }

        p {
            color: #2C2C2C
        }

        .uk-table-striped tbody tr:nth-of-type(odd),
        .uk-table-striped>tr:nth-of-type(odd) {
            background: #CFC0B2;
            border-top: 1px solid #B8A491;
            border-bottom: 1px solid #B8A491
        }
    </style>
</head>

<body>
    <div class="header">
        <a href="https://github.com/builtforme/swatchjs"><img alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" style="position: absolute; top: 0; right: 0; border: 0;"></a>
        <div class="uk-position-medium uk-position-center">
            <div class="uk-container-small head-content">
                <h1 class="uk-text-center lead-font" style="font-size: 5em;">swatch<span style="color:#CC6161">js</span></h1>
                <h3 class="lead-font uk-margin-remove-top">Easily create and expose APIs as methods</h3>
                <pre><code class="language-javascript">const swatch = require('swatchjs');

const model = swatch({
    add: (a, b) =&gt; a + b,
    sub: (a, b) =&gt; a - b,
);</code></pre>
            </div>
            <p class="uk-text-center">
                <button class="uk-button uk-button-primary button" onclick="location.href='https://github.com/builtforme/swatchjs/archive/master.zip'">Download</button>
                <a class="uk-button uk-button-secondary button-second" href='#docs' uk-scroll>View Docs</a>
            </p>
        </div>
    </div>

    <div id="docs" class="uk-container">
        <div class="uk-container-small uk-align-center">
            <div class="uk-text-center" uk-grid>
                <div class="uk-width-1-5@s">
                    <ul class="uk-nav uk-nav-default uk-text-left uk-padding uk-padding-remove-horizontal uk-visible@s" uk-scrollspy-nav="closest: li; scroll: true"
                        uk-sticky>
                        <li class="uk-active"><a href="#docs-about">About</a></li>
                        <li><a href="#docs-usage">Usage</a></li>
                        <li><a href="#docs-api">API</a></li>
                    </ul>
                </div>
                <div class="uk-width-expand@s uk-text-left">
                    <div id="docs-about">
                        <h1>About</h1>
                        <hr>
                        <p class="uk-text-bold">SwatchJS is a javascript framework for easily creating and exposing APIs as methods. </p>

                        <p> SwatchJS allows your API functions to be written in the same way that any other function is written:
                            they take parameters, have a return value, and throw exceptions. They are easy to write and test.
                            You can write your API independent of a transport layer. You don't have to worry about status
                            codes, routes, request context, query parameters, or any of that code that slows you down. It's
                            less code to write and test. Next, you can choose how to expose your API, using one of pre-existing
                            adapters, or by writing a new one. These adapters range from simple GET calls over HTTP, to SOAP,
                            to JSON-RPC, to Protobufs, etc.</p>
                        <h2>Benefits</h2>
                        <hr class="uk-divider-small">
                        <dl class="uk-description-list">
                            <dt>Your code is simple</dt>
                            <dd>Write service API functions the same way you write any other function in the language (they take
                                parameters, have a return value, and throw exceptions).</dd>
                            <dt>Your functions are easy to write and test</dt>
                            <dd>You only need to write and test the logical behavior of the function, not the transport layer
                                (HTTP headers, status codes, etc.).</dd>
                            <dt>Faster, better, cheaper</dt>
                            <dd>Because you are not checking HTTP headers or query parameters, nor are you producing HTTP status
                                codes, response headers, etc., you can write less code, which in turn means less bugs. You
                                can also deliver more in less time.</dd>
                            <dt>DRY (Don't Repeat Yourself)</dt>
                            <dd>Because you are only writing core logic in the language, the same functions can be reused as
                                needed. They can be used internally as building blocks for other functions, they can be exposed
                                as web APIs, or wrapped in CLI tools.</dd>
                        </dl>

                    </div>
                    <br>
                    <br>
                    <div id="docs-usage">
                        <h1>Usage</h1>
                        <hr>
                        <h2>Instalation</h2>
                        <hr class="uk-divider-small">
                        <p>To install, simply run:</p>
                        <pre><code class="language-javascript">npm install swatchjs</code></pre>
                        <h2>Example Usage</h2>
                        <hr class="uk-divider-small">

                        <p>The following creates a simple API which takes 2 parameters (<code>a</code> and <code>b</code>) and
                            returns their sum (<code>add</code> method) or difference (<code>sub</code> method).</p>
                        <pre><code class="language-javascript">const swatch = require('swatchjs');

const model = swatch({
    add: (a, b) =&gt; a + b,
    sub: (a, b) =&gt; a - b,
});</code></pre>

                        <p>That's it. You are in business. All that is left is to expose the model, usually through one of the
                            adapters. It's quick and easy. No need to write unnecessary code for the application or transport
                            layer. KISS.</p>
                    </div>
                    <br>
                    <br>
                    <div id="docs-api">
                        <h1>API Reference</h1>
                        <hr>

                        <div>
                            <h2>The <code>swatch</code> function</h2>
                            <hr class="uk-divider-small">
                            <pre><code class="language-javascript">const swatch = require('swatchjs');

    const model = swatch({
        // api
    });</code></pre>
                            <p>Loading this library will result in a function (swatch in the example above) which when called
                                will produce a model for the API. This model can then be passed to adapters to expose that
                                API. See Exposing the API below for more details.</p>
                            <br>
                        </div>
                        <div>
                            <h2>Declaring your API</h2>
                            <hr class="uk-divider-small">
                            <p>This function takes an object which describes the API, and it looks like this:</p>
                            <pre><code class="language-javascript">{
            "service.api1": myApiFn1,
            "service.api2": myApiFn2,
            // ...
        }</code></pre>
                            <p>Each <code>methodName</code> is the name for the API you want to expose. The convention is to
                                group the APIs by functionality area (often by microservices), with camelCase names separated
                                by dots (e.g.:<code>users.create</code>, <code>users.delete</code>, <code>users.options.add</code>,
                                <code>users.options.list</code>, <code>users.options.setDefault</code>).</p>
                            <p>Each method name is associated with a handler. The handler can be the function which will handle
                                the API method call, or it can be an object that provides a little more flexibility in describing
                                the function.</p>
                            <br>
                        </div>
                        <div>
                            <h2>Declaration-time errors</h2>
                            <hr class="uk-divider-small">
                            <p>The following errors will be generated when the API is declared:</p>
                            <table class="uk-table uk-table-striped">
                                <thead class="thead-default">
                                    <tr>
                                        <th>Error</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>invalid_arg_list</code></td>
                                        <td>One or more of the provided method <code>args</code> lists did not match the handler
                                            function.
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <br>
                        </div>
                        <div>
                            <h2>Declaring API methods (the easy way)</h2>
                            <hr class="uk-divider-small">
                            <p>The easiest way to expose an API method is to just associate the method name with its function.
                                When exposed, each of the parameters in the function will be arguments in the method.</p>
                            <pre><code class="language-javascript">function createUser(username, password, name) {
    // ...
}

const model = swatch({
    "users.create": createUser,
});</code></pre>
                            <p>In the example above, when invoking <code>users.create</code>, the user would pass in three arguments:
                                <code>username</code>, <code>password</code>, and <code>name</code>. The framework automatically
                                matches the arguments passed in by the user to the function arguments.</p>


                            <br>
                        </div>
                        <div>
                            <h2>Declaring API methods (the more descriptive way)</h2>
                            <hr class="uk-divider-small">
                            <p>Alternatively, you can have more control over the behavior of each API method, as illustrated
                                below:
                            </p>
                            <pre><code class="language-javascript">function createUser(username, password, name) {
    // ...
}

function middlewareFn(ctx, next) {
    // ...
}

const model = swatch({
    "users.create": {
        handler: createUser,
        args: [
            {
                name: 'username',
                parse: String,
                optional: false,
            },
            {
                name: 'password',
                parse: String,
                optional: false,
            },
            {
                name: 'name',
                parse: String,
                optional: true,
                default: 'New User',
            },
        ],
        middleware: [middlewareFn],
    },
});</code></pre>
                            <p>In this scenario, when invoking <code>users.create</code>, the user would still pass in three
                                arguments: <code>username</code>, <code>password</code>, and <code>name</code>. The framework
                                automatically matches the <code>username</code> value to the first argument, the <code>password</code>                                value to the second argument, and <code>name</code> value to the third argument of the <code>createUser</code>                                function. Additionally, the <code>name</code> value is optional and will provide a default
                                value of <code>'New User'</code> if the argument is not present.</p>
                            <p>If the <code>args</code> array is present, it must match the function in arity (i.e., the number
                                of arguments declared in the function must match the number of elements in the <code>args</code>                                array).</p>
                            <p>The following properties can be set:</p>
                            <table class="uk-table uk-table-striped">
                                <thead class="thead-default">
                                    <tr>
                                        <th>Property</th>
                                        <th>Required?</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>handler</code></td>
                                        <td>Yes</td>
                                        <td>The API handler. Must be a function.</td>
                                    </tr>
                                    <tr>
                                        <td><code>args</code></td>
                                        <td>No</td>
                                        <td>Function arguments. Must be an array. See below for more information.</td>
                                    </tr>
                                    <tr>
                                        <td><code>metadata</code></td>
                                        <td>No</td>
                                        <td>An object with additional information about the handler (see below).</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p>If the <code>args</code> array is present, it must match the function in arity (i.e., the number
                                of arguments declared in the function must match the number of elements in the <code>args</code>                                array). Each element in the array can be either a string or an object.</p>
                            <p>If an element is an object, then the following properties are valid:</p>
                            <table class="uk-table uk-table-striped">
                                <thead class="thead-default">
                                    <tr>
                                        <th>Property</th>
                                        <th>Required?</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>args[idx].name</code></td>
                                        <td>No</td>
                                        <td>The name of the parameter as passed by caller. Defaults to the name specified in
                                            the function.</td>
                                    </tr>
                                    <tr>
                                        <td><code>args[idx].parse</code></td>
                                        <td>No</td>
                                        <td>A function that will be executed on the input. Can be used to perform type coercions.
                                            If present, should return desired value, or throw.</td>
                                    </tr>
                                    <tr>
                                        <td><code>args[idx].validate/code&gt;</code></td>
                                        <td>No</td>
                                        <td>A function that will be executed on the successfully parsed/coerced input value.
                                            Should not modify or return a value, should throw if invalid.</td>
                                    </tr>
                                    <tr>
                                        <td><code>args[idx].optional</code></td>
                                        <td>No</td>
                                        <td>A boolean indicating whether the argument is optional. Defaults to false. If user
                                            fails to provide a required arguments, the request will fail.</td>
                                    </tr>
                                    <tr>
                                        <td><code>args[idx].default</code></td>
                                        <td>No</td>
                                        <td>A primitive type or object. If user fails to provide an optional argument, the default
                                            will be provided.</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p>If an element is a string "argName", then it is considered equivalent to the object <code>{ name: "argName" }</code>.</p>

                            <p>If the <code>metadata</code> object is present, the following sub-properties can be set:</p>
                            <table class="uk-table uk-table-striped">
                                <thead class="thead-default">
                                    <tr>
                                        <th>Property</th>
                                        <th>Required?</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>noAuth</code></td>
                                        <td>No</td>
                                        <td>A boolean that indicates whether the authAdapter (if any is defined by swatchKoa or swatchExpress options) should be skipped for this particular method handler. Defaults to <code>false</code>.</td>
                                    </tr>
                                    <tr>
                                        <td><code>middleware</code></td>
                                        <td>No</td>
                                        <td>An array of functions to run as middleware. Accepts request context and callback
                                            function as params. Throw on error to abort request handler.</td>
                                    </tr>
                                </tbody>
                            </table>

                            <br>
                        </div>
                        <div>
                            <h2>Runtime Errors</h2>
                            <hr class="uk-divider-small">
                            <p>The following errors will be generated during runtime (when invoking the handler):</p>
                            <table class="uk-table uk-table-striped">
                                <thead class="thead-default">
                                    <tr>
                                        <th>Error</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>invalid_arg_name</code></td>
                                        <td>One or more of the provided arguments was not expected by the handler.</td>
                                    </tr>
                                    <tr>
                                        <td><code>missing_arg</code></td>
                                        <td>One or more of the required arguments were not provided.</td>
                                    </tr>
                                </tbody>
                            </table>

                            <br>
                        </div>
                    </div>
                </div>
            </div>
            <h5 class="footer uk-heading-line uk-text-center"><span>Created by <a style="text-decoration:none;" class="uk-button-text" href="https://www.builtforme.tech">Built For Me</a></span></h5>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.1/prism.min.js">
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.1/components/prism-javascript.min.js">
        </script>
</body>

</html>
